<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="blog">
<meta property="og:type" content="website">
<meta property="og:title" content="jhmarryme&#39;s blog">
<meta property="og:url" content="https://wangdaye7.github.io/index.html">
<meta property="og:site_name" content="jhmarryme&#39;s blog">
<meta property="og:description" content="blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="jhmarryme&#39;s blog">
<meta name="twitter:description" content="blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://wangdaye7.github.io/">





  <title>jhmarryme's blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
<a href="https://github.com/wangdaye7" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">jhmarryme's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wangdaye7.github.io/2019/03/04/spring第二天/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiahao Wang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jhmarryme's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/04/spring第二天/" itemprop="url">spring第二天</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-04T12:46:21Z">
                2019-03-04
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javaWeb/" itemprop="url" rel="index">
                    <span itemprop="name">javaWeb</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="今日任务概览"><a href="#今日任务概览" class="headerlink" title="今日任务概览"></a>今日任务概览</h1><p>1、完善我们的account案例<br>2、分析案例中问题<br>3、回顾之前讲过的一个技术：动态代理<br>4、动态代理另一种实现方式<br>5、解决案例中的问题<br>6、AOP的概念<br>7、spring中的AOP相关术语<br>8、spring中基于XML和注解的AOP配置</p>
<h2 id="spring中基于XML和注解的AOP配置"><a href="#spring中基于XML和注解的AOP配置" class="headerlink" title="spring中基于XML和注解的AOP配置"></a>spring中基于XML和注解的AOP配置</h2><p>在Spring文档中搜索xmlns:aop找到约束.</p>
<ol>
<li><p>XML的AOP配置及使用</p>
<ol>
<li><p>常用通知配置<br>XML中的配置:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--配置accountService--&gt;</span><br><span class="line">   &lt;bean id="accountService" class="jhmarryme.service.impl.AccountServiceImpl"&gt;&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">   &lt;!--配置logger对象--&gt;</span><br><span class="line">   &lt;bean id="logger" class="jhmarryme.utils.Logger"&gt;&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   &lt;!--开始Spring的AOP配置--&gt;</span><br><span class="line">   &lt;aop:config&gt;</span><br><span class="line">       &lt;!--配置切入点   此处配置必须在前面--&gt;</span><br><span class="line">       &lt;aop:pointcut id=<span class="string">"pt1"</span> expression=<span class="string">"execution(* jhmarryme.service.impl.*.*(..))"</span>/&gt;</span><br><span class="line">       &lt;aop:aspect id=<span class="string">"logAdvice"</span> ref=<span class="string">"logger"</span>&gt;</span><br><span class="line">           &lt;!-- 配置前置通知：在切入点方法执行之前执行</span><br><span class="line">           &lt;aop:before method="beforePrintLog" pointcut-ref="pt1" &gt;&lt;/aop:before&gt;--&gt;</span><br><span class="line"></span><br><span class="line">           &lt;!-- 配置后置通知：在切入点方法正常执行之后值。它和异常通知永远只能执行一个</span><br><span class="line">           &lt;aop:after-returning method="afterReturningPrintLog" pointcut-ref="pt1"&gt;&lt;/aop:after-returning&gt;--&gt;</span><br><span class="line"></span><br><span class="line">           &lt;!-- 配置异常通知：在切入点方法执行产生异常之后执行。它和后置通知永远只能执行一个</span><br><span class="line">           &lt;aop:after-throwing method="afterThrowingPrintLog" pointcut-ref="pt1"&gt;&lt;/aop:after-throwing&gt;--&gt;</span><br><span class="line">           &lt;!--顺序不能错--&gt;</span><br><span class="line">           &lt;!-- 配置最终通知：无论切入点方法是否正常执行它都会在其后面执行</span><br><span class="line">           &lt;aop:after method="afterPrintLog" pointcut-ref="pt1"&gt;&lt;/aop:after&gt;--&gt;</span><br><span class="line">           &lt;aop:around method=<span class="string">"aroundPringtLog"</span> pointcut-ref=<span class="string">"pt1"</span>/&gt;</span><br><span class="line">       &lt;/aop:aspect&gt;</span><br><span class="line">   &lt;/aop:config&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>环绕通知 XML的配置参照上段代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 环绕通知</span></span><br><span class="line"><span class="comment">    * 问题：</span></span><br><span class="line"><span class="comment">    *      当我们配置了环绕通知之后，切入点方法没有执行，而通知方法执行了。</span></span><br><span class="line"><span class="comment">    * 分析：</span></span><br><span class="line"><span class="comment">    *      通过对比动态代理中的环绕通知代码，发现动态代理的环绕通知有明确的切入点方法调用，而我们的代码中没有。</span></span><br><span class="line"><span class="comment">    * 解决：</span></span><br><span class="line"><span class="comment">    *      Spring框架为我们提供了一个接口：ProceedingJoinPoint。该接口有一个方法proceed()，此方法就相当于明确调用切入点方法。</span></span><br><span class="line"><span class="comment">    *      该接口可以作为环绕通知的方法参数，在程序执行时，spring框架会为我们提供该接口的实现类供我们使用。</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * spring中的环绕通知：</span></span><br><span class="line"><span class="comment">    *      它是spring框架为我们提供的一种可以在代码中手动控制增强方法何时执行的方式。</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Object <span class="title">aroundPringtLog</span><span class="params">(ProceedingJoinPoint point)</span></span>&#123; <span class="comment">//Spring控制传入的参数, 拿来用及可以</span></span><br><span class="line">       <span class="comment">//point中有一个返回参数的方法</span></span><br><span class="line">       Object[] args = point.getArgs();</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           printLog();</span><br><span class="line">           Object proceed = point.proceed(args); <span class="comment">//此处调用service层的方法</span></span><br><span class="line">           afterReturningPrintLog();</span><br><span class="line">           <span class="keyword">return</span> proceed;</span><br><span class="line">       &#125; <span class="keyword">catch</span> (Throwable throwable) &#123; <span class="comment">//此处异常较为特殊</span></span><br><span class="line">           afterThrowingPrintLog();</span><br><span class="line">           <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException();</span><br><span class="line">       &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">           afterPrintLog();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>XML配置详解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--spring中基于XML的AOP配置步骤</span><br><span class="line">    <span class="number">1</span>、把通知Bean也交给spring来管理</span><br><span class="line">    <span class="number">2</span>、使用aop:config标签表明开始AOP的配置</span><br><span class="line">    <span class="number">3</span>、使用aop:aspect标签表明配置切面</span><br><span class="line">            id属性：是给切面提供一个唯一标识</span><br><span class="line">            ref属性：是指定通知类bean的Id。</span><br><span class="line">    <span class="number">4</span>、在aop:aspect标签的内部使用对应标签来配置通知的类型</span><br><span class="line">           我们现在示例是让printLog方法在切入点方法执行之前之前：所以是前置通知</span><br><span class="line">           aop:before：表示配置前置通知</span><br><span class="line">                method属性：用于指定Logger类中哪个方法是前置通知</span><br><span class="line">                pointcut属性：用于指定切入点表达式，该表达式的含义指的是对业务层中哪些方法增强</span><br><span class="line"></span><br><span class="line">        切入点表达式的写法：</span><br><span class="line">            关键字：execution(表达式)</span><br><span class="line">            表达式：</span><br><span class="line">                访问修饰符  返回值  包名.包名.包名...类名.方法名(参数列表)</span><br><span class="line">            标准的表达式写法：</span><br><span class="line">                <span class="keyword">public</span> <span class="keyword">void</span> com.itheima.service.impl.AccountServiceImpl.saveAccount()</span><br><span class="line">            访问修饰符可以省略</span><br><span class="line">                <span class="keyword">void</span> com.itheima.service.impl.AccountServiceImpl.saveAccount()</span><br><span class="line">            返回值可以使用通配符，表示任意返回值</span><br><span class="line">                * com.itheima.service.impl.AccountServiceImpl.saveAccount()</span><br><span class="line">            包名可以使用通配符，表示任意包。但是有几级包，就需要写几个*.</span><br><span class="line">                * *.*.*.*.AccountServiceImpl.saveAccount())</span><br><span class="line">            包名可以使用..表示当前包及其子包</span><br><span class="line">                * *..AccountServiceImpl.saveAccount()</span><br><span class="line">            类名和方法名都可以使用*来实现通配</span><br><span class="line">                * *..*.*()</span><br><span class="line">            参数列表：</span><br><span class="line">                可以直接写数据类型：</span><br><span class="line">                    基本类型直接写名称           <span class="keyword">int</span></span><br><span class="line">                    引用类型写包名.类名的方式   java.lang.String</span><br><span class="line">                可以使用通配符表示任意类型，但是必须有参数</span><br><span class="line">                可以使用..表示有无参数均可，有参数可以是任意类型</span><br><span class="line">            全通配写法：</span><br><span class="line">                * *..*.*(..)</span><br><span class="line"></span><br><span class="line">            实际开发中切入点表达式的通常写法：</span><br><span class="line">                切到业务层实现类下的所有方法</span><br><span class="line">                    * com.itheima.service.impl.*.*(..)</span><br><span class="line">--&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>采用注解的方式实现AOP</p>
<ol>
<li><p>在XML文件中添加</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 配置spring创建容器时要扫描的包--&gt;</span><br><span class="line">   &lt;context:component-scan base-package="com.itheima"&gt;&lt;/context:component-scan&gt;</span><br><span class="line"></span><br><span class="line">   &lt;!-- 配置spring开启注解AOP的支持 --&gt;</span><br><span class="line">   &lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>纯注解方式时<br> 在配置类中添加@EnableAspectJAutoProxy</p>
</li>
<li><p>在切面类中的使用</p>
<ol>
<li>@Aspect 声明当前类是一个切面类</li>
<li>@Before(“pt1()”)....@Around(“pt1()”)  注解声明通知类型</li>
<li><p>指明切入点</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Pointcut</span>(<span class="string">"execution(* jhmarryme.service.impl.*.*(..))"</span>)</span><br><span class="line">  	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pt1</span><span class="params">()</span></span>&#123; &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用around时, 同xml配置方式的around相应方法</p>
<h2 id="对动态代理的学习"><a href="#对动态代理的学习" class="headerlink" title="对动态代理的学习"></a>对动态代理的学习</h2></li>
</ol>
</li>
</ol>
</li>
<li><p>基于接口的实现</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">final</span> Producer producer = <span class="keyword">new</span> Producer();</span><br><span class="line"></span><br><span class="line">       <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * 动态代理：</span></span><br><span class="line"><span class="comment">        *  特点：字节码随用随创建，随用随加载</span></span><br><span class="line"><span class="comment">        *  作用：不修改源码的基础上对方法增强</span></span><br><span class="line"><span class="comment">        *  分类：</span></span><br><span class="line"><span class="comment">        *      基于接口的动态代理</span></span><br><span class="line"><span class="comment">        *      基于子类的动态代理</span></span><br><span class="line"><span class="comment">        *  基于接口的动态代理：</span></span><br><span class="line"><span class="comment">        *      涉及的类：Proxy</span></span><br><span class="line"><span class="comment">        *      提供者：JDK官方</span></span><br><span class="line"><span class="comment">        *  如何创建代理对象：</span></span><br><span class="line"><span class="comment">        *      使用Proxy类中的newProxyInstance方法</span></span><br><span class="line"><span class="comment">        *  创建代理对象的要求：</span></span><br><span class="line"><span class="comment">        *      被代理类最少实现一个接口，如果没有则不能使用</span></span><br><span class="line"><span class="comment">        *  newProxyInstance方法的参数：</span></span><br><span class="line"><span class="comment">        *      ClassLoader：类加载器</span></span><br><span class="line"><span class="comment">        *          它是用于加载代理对象字节码的。和被代理对象使用相同的类加载器。固定写法。</span></span><br><span class="line"><span class="comment">        *      Class[]：字节码数组</span></span><br><span class="line"><span class="comment">        *          它是用于让代理对象和被代理对象有相同方法。固定写法。</span></span><br><span class="line"><span class="comment">        *      InvocationHandler：用于提供增强的代码</span></span><br><span class="line"><span class="comment">        *          它是让我们写如何代理。我们一般都是些一个该接口的实现类，通常情况下都是匿名内部类，但不是必须的。</span></span><br><span class="line"><span class="comment">        *          此接口的实现类都是谁用谁写。</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">      IProducer proxyProducer = (IProducer) Proxy.newProxyInstance(producer.getClass().getClassLoader(),</span><br><span class="line">               producer.getClass().getInterfaces(),</span><br><span class="line">               <span class="keyword">new</span> InvocationHandler() &#123;</span><br><span class="line">                   <span class="comment">/**</span></span><br><span class="line"><span class="comment">                    * 作用：执行被代理对象的任何接口方法都会经过该方法</span></span><br><span class="line"><span class="comment">                    * 方法参数的含义</span></span><br><span class="line"><span class="comment">                    * <span class="doctag">@param</span> proxy   代理对象的引用</span></span><br><span class="line"><span class="comment">                    * <span class="doctag">@param</span> method  当前执行的方法</span></span><br><span class="line"><span class="comment">                    * <span class="doctag">@param</span> args    当前执行方法所需的参数</span></span><br><span class="line"><span class="comment">                    * <span class="doctag">@return</span>        和被代理对象方法有相同的返回值</span></span><br><span class="line"><span class="comment">                    * <span class="doctag">@throws</span> Throwable</span></span><br><span class="line"><span class="comment">                    */</span></span><br><span class="line">                   <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">                       <span class="comment">//提供增强的代码</span></span><br><span class="line">                       Object returnValue = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">                       <span class="comment">//1.获取方法执行的参数</span></span><br><span class="line">                       Float money = (Float)args[<span class="number">0</span>];</span><br><span class="line">                       <span class="comment">//2.判断当前方法是不是销售</span></span><br><span class="line">                       <span class="keyword">if</span>(<span class="string">"saleProduct"</span>.equals(method.getName())) &#123;</span><br><span class="line">                           returnValue = method.invoke(producer, money*<span class="number">0.8f</span>);</span><br><span class="line">                       &#125;</span><br><span class="line">                       <span class="keyword">return</span> returnValue;</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;);</span><br><span class="line">       proxyProducer.saleProduct(<span class="number">10000f</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>基于子类的实现</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">final</span> Producer producer = <span class="keyword">new</span> Producer();</span><br><span class="line"></span><br><span class="line">       <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * 动态代理：</span></span><br><span class="line"><span class="comment">        *  特点：字节码随用随创建，随用随加载</span></span><br><span class="line"><span class="comment">        *  作用：不修改源码的基础上对方法增强</span></span><br><span class="line"><span class="comment">        *  分类：</span></span><br><span class="line"><span class="comment">        *      基于接口的动态代理</span></span><br><span class="line"><span class="comment">        *      基于子类的动态代理</span></span><br><span class="line"><span class="comment">        *  基于子类的动态代理：</span></span><br><span class="line"><span class="comment">        *      涉及的类：Enhancer</span></span><br><span class="line"><span class="comment">        *      提供者：第三方cglib库</span></span><br><span class="line"><span class="comment">        *  如何创建代理对象：</span></span><br><span class="line"><span class="comment">        *      使用Enhancer类中的create方法</span></span><br><span class="line"><span class="comment">        *  创建代理对象的要求：</span></span><br><span class="line"><span class="comment">        *      被代理类不能是最终类</span></span><br><span class="line"><span class="comment">        *  create方法的参数：</span></span><br><span class="line"><span class="comment">        *      Class：字节码</span></span><br><span class="line"><span class="comment">        *          它是用于指定被代理对象的字节码。</span></span><br><span class="line"><span class="comment">        *</span></span><br><span class="line"><span class="comment">        *      Callback：用于提供增强的代码</span></span><br><span class="line"><span class="comment">        *          它是让我们写如何代理。我们一般都是些一个该接口的实现类，通常情况下都是匿名内部类，但不是必须的。</span></span><br><span class="line"><span class="comment">        *          此接口的实现类都是谁用谁写。</span></span><br><span class="line"><span class="comment">        *          我们一般写的都是该接口的子接口实现类：MethodInterceptor</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       Producer cglibProducer = (Producer)Enhancer.create(producer.getClass(), <span class="keyword">new</span> MethodInterceptor() &#123;</span><br><span class="line">           <span class="comment">/**</span></span><br><span class="line"><span class="comment">            * 执行被代理  对象的任何方法都会经过该方法</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> proxy</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> method</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment">            *    以上三个参数和基于接口的动态代理中invoke方法的参数是一样的</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@param</span> methodProxy ：当前执行方法的代理对象</span></span><br><span class="line"><span class="comment">            * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">            * <span class="doctag">@throws</span> Throwable</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">           <span class="function"><span class="keyword">public</span> Object <span class="title">intercept</span><span class="params">(Object proxy, Method method, Object[] args, MethodProxy methodProxy)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">               <span class="comment">//提供增强的代码</span></span><br><span class="line">               Object returnValue = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">               <span class="comment">//1.获取方法执行的参数</span></span><br><span class="line">               Float money = (Float)args[<span class="number">0</span>];</span><br><span class="line">               <span class="comment">//2.判断当前方法是不是销售</span></span><br><span class="line">               <span class="keyword">if</span>(<span class="string">"saleProduct"</span>.equals(method.getName())) &#123;</span><br><span class="line">                   returnValue = method.invoke(producer, money*<span class="number">0.8f</span>);</span><br><span class="line">               &#125;</span><br><span class="line">               <span class="keyword">return</span> returnValue;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br><span class="line">       cglibProducer.saleProduct(<span class="number">12000f</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>实例中的使用</p>
<ol>
<li><p>beanFactory的编写:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeanFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> IAccountService accountService;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTransactionManager</span><span class="params">(TransactionManager transactionManager)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.transactionManager = transactionManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TransactionManager transactionManager;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAccountService</span><span class="params">(IAccountService accountService)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.accountService = accountService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取service代理对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IAccountService <span class="title">getAccountService</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (IAccountService) Proxy.newProxyInstance(accountService.getClass().getClassLoader(), accountService.getClass().getInterfaces(), <span class="keyword">new</span> InvocationHandler() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">                <span class="comment">//增强service中的方法</span></span><br><span class="line">                Object returnVal = <span class="keyword">null</span>;</span><br><span class="line">                <span class="keyword">try</span>&#123;</span><br><span class="line"><span class="comment">//                    1. 开启事务</span></span><br><span class="line">                    transactionManager.beginTransaction();</span><br><span class="line"><span class="comment">//                    2. 执行操作</span></span><br><span class="line">                    returnVal = method.invoke(accountService, args);</span><br><span class="line">                    <span class="keyword">int</span> i = <span class="number">1</span> / <span class="number">0</span>;</span><br><span class="line"><span class="comment">//                    3. 提交事务</span></span><br><span class="line">                    transactionManager.commit();</span><br><span class="line"><span class="comment">//                    4. 返回结果</span></span><br><span class="line">                    <span class="keyword">return</span> returnVal;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line"><span class="comment">//                    5. 回滚事务</span></span><br><span class="line">                    transactionManager.rollback();</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">                &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="comment">//                    6. 关闭连接</span></span><br><span class="line">                    transactionManager.release();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>bean.xml的配置<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--配置accountService对象--&gt;</span><br><span class="line">   &lt;bean id=<span class="string">"accountService"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"jhmarryme.service.impl.AccountServiceImpl"</span>&gt;</span><br><span class="line">       &lt;!--注入accountDao对象--&gt;</span><br><span class="line">       &lt;property name="accountDao" ref="accountDao"&gt;&lt;/property&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line">   &lt;!--配置accounDao对象--&gt;</span><br><span class="line">   &lt;bean id=<span class="string">"accountDao"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"jhmarryme.dao.impl.AccountDaoImpl"</span>&gt;</span><br><span class="line">       &lt;!--注入conn--&gt;</span><br><span class="line">       &lt;property name="connectionUtils" ref="conn"&gt;&lt;/property&gt;</span><br><span class="line">       &lt;!--注入runner--&gt;</span><br><span class="line">       &lt;property name="runner" ref="runner"&gt;&lt;/property&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line">   &lt;!--配置连接工具类--&gt;</span><br><span class="line">   &lt;bean id=<span class="string">"conn"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"jhmarryme.utils.ConnectionUtils"</span>&gt;</span><br><span class="line">       &lt;!--注入数据源--&gt;</span><br><span class="line">       &lt;property name="dataSource" ref="dataSource"&gt;&lt;/property&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line">   &lt;!--配置QueryRunner对象--&gt;</span><br><span class="line">   &lt;bean id=<span class="string">"runner"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"org.apache.commons.dbutils.QueryRunner"</span>&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line">   &lt;!--配置数据源--&gt;</span><br><span class="line">   &lt;bean id=<span class="string">"dataSource"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span><br><span class="line">       &lt;!--注入属性--&gt;</span><br><span class="line">       &lt;property name=<span class="string">"driverClass"</span> value=<span class="string">"com.mysql.jdbc.Driver"</span>/&gt;</span><br><span class="line">       &lt;property name=<span class="string">"jdbcUrl"</span> value=<span class="string">"jdbc:mysql://localhost:3306/test"</span>/&gt;</span><br><span class="line">       &lt;property name=<span class="string">"user"</span> value=<span class="string">"root"</span>/&gt;</span><br><span class="line">       &lt;property name=<span class="string">"password"</span> value=<span class="string">"541224"</span>/&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">   &lt;!--配置事务管理类--&gt;</span><br><span class="line">   &lt;bean id=<span class="string">"transactionManager"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"jhmarryme.utils.TransactionManager"</span>&gt;</span><br><span class="line">       &lt;property name=<span class="string">"connectionUtils"</span> ref=<span class="string">"conn"</span>/&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line">	</span><br><span class="line">   &lt;!--配置代理的service--&gt;</span><br><span class="line">   &lt;bean id=<span class="string">"proxyAccountService"</span> factory-bean=<span class="string">"beanFactory"</span> factory-method=<span class="string">"getAccountService"</span>&gt;</span><br><span class="line">	</span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line">   &lt;!--配置代理beanFactory--&gt;</span><br><span class="line">   &lt;bean id=<span class="string">"beanFactory"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"jhmarryme.factoty.BeanFactory"</span>&gt;</span><br><span class="line">       &lt;property name=<span class="string">"accountService"</span> ref=<span class="string">"accountService"</span>/&gt;</span><br><span class="line">       &lt;property name=<span class="string">"transactionManager"</span> ref=<span class="string">"transactionManager"</span>/&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="对转账事务通过AOP方式的增强"><a href="#对转账事务通过AOP方式的增强" class="headerlink" title="对转账事务通过AOP方式的增强"></a>对转账事务通过AOP方式的增强</h2><pre><code>1. 导入依赖 
2. 在XML开启切面类的支持&lt;aop:aspectj-autoproxy&gt;&lt;/aop:aspectj-autoproxy&gt;
3. 编写切面类使用@Aspect注明是一个注解类 注册Bean对象@Component
4. 完成切面类中的方法调用及注入的管理
5. 编写测试类
</code></pre><p>至此今天的学习任务完成, 对AOP的概念了有了一定的理解, 对Spring中的AOP配置有所认识了, 熟练程度还是不够. 基本能完成AOP的关于XML和注解的配置.</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wangdaye7.github.io/2019/03/04/spring第一天/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiahao Wang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jhmarryme's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/04/spring第一天/" itemprop="url">spring第一天</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-03T19:49:55Z">
                2019-03-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javaWeb/" itemprop="url" rel="index">
                    <span itemprop="name">javaWeb</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Spring的理解"><a href="#Spring的理解" class="headerlink" title="Spring的理解"></a>Spring的理解</h2><h2 id="使用Spring的步骤"><a href="#使用Spring的步骤" class="headerlink" title="使用Spring的步骤"></a>使用Spring的步骤</h2><p>编写bean.xml<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;beans xmlns=<span class="string">"http://www.springframework.org/schema/beans"</span></span><br><span class="line">       xmlns:xsi=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="line">       xmlns:context=<span class="string">"http://www.springframework.org/schema/context"</span></span><br><span class="line">       xsi:schemaLocation=<span class="string">"http://www.springframework.org/schema/beans</span></span><br><span class="line"><span class="string">        http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="line"><span class="string">        http://www.springframework.org/schema/context</span></span><br><span class="line"><span class="string">        http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span><br><span class="line"></span><br><span class="line">     &lt;!--jhmarryme包所有文件使用注解形式--&gt;</span><br><span class="line">    &lt;context:component-scan base-package="jhmarryme"&gt;&lt;/context:component-scan&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="Spring的基本用法"><a href="#Spring的基本用法" class="headerlink" title="Spring的基本用法"></a>Spring的基本用法</h2><ol>
<li><p>bean 标签<br> <strong> 作用：</strong> </p>
<pre><code>用于配置对象让 spring 来创建的。
默认情况下它调用的是类中的无参构造函数。如果没有无参构造函数则不能创建成功。
</code></pre><p> <strong> 属性：</strong> </p>
<pre><code>id：给对象在容器中提供一个唯一标识。用于获取对象。
class：指定类的全限定类名。用于反射创建对象。默认情况下调用无参构造函数。
scope：指定对象的作用范围。
* singleton :默认值，单例的.
* prototype :多例的.
* request :WEB 项目中,Spring 创建一个 Bean 的对象,将对象存入到 request 域中.
* session :WEB 项目中,Spring 创建一个 Bean 的对象,将对象存入到 session 域中.
* global session :WEB 项目中,应用在 Portlet 环境.如果没有 Portlet 环境那么
globalSession 相当于 session.
init-method：指定类中的初始化方法名称。
destroy-method：指定类中销毁方法名称。
</code></pre></li>
<li><p>实例化 Bean 的三种方式 </p>
</li>
<li><p>依赖注入</p>
<ol>
<li><p>构造函数注入</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=<span class="string">"accountService"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"com.itheima.service.impl.AccountServiceImpl"</span>&gt;</span><br><span class="line">    &lt;constructor-arg name="name" value="张三"&gt;&lt;/constructor-arg&gt;</span><br><span class="line">    &lt;constructor-arg name="age" value="18"&gt;&lt;/constructor-arg&gt;</span><br><span class="line">    &lt;constructor-arg name="birthday" ref="now"&gt;&lt;/constructor-arg&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">&lt;bean id="now" class="java.util.Date"&gt;&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>set注入</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id=<span class="string">"accountService"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"com.itheima.service.impl.AccountServiceImpl"</span>&gt;</span><br><span class="line">    &lt;property name="name" value="test"&gt;&lt;/property&gt;</span><br><span class="line">    &lt;property name="age" value="21"&gt;&lt;/property&gt;</span><br><span class="line">    &lt;property name="birthday" ref="now"&gt;&lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br><span class="line">&lt;bean id="now" class="java.util.Date"&gt;&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>集合的注入<br>待补充</p>
</li>
</ol>
</li>
</ol>
<ol start="4">
<li><p>使用纯注解的方式配置Bean和完成依赖注入</p>
<ol>
<li><p>步骤</p>
<ul>
<li>区别自己编写的类还是导入的jar包<ul>
<li>如果是class文件只能使用新建一个配置用的class文件</li>
<li>自己写的类可以在上面直接加注解</li>
</ul>
</li>
<li>注意几个注解的使用</li>
<li>通过注解获取容器<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> AnnotationConfigApplicationContext(SpringConfiguration.class);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>参照代码:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(<span class="string">"jhmarryme"</span>)</span><br><span class="line"><span class="meta">@PropertySource</span>(<span class="string">"classpath:jdbcConfig.properties"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringConfiguration</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.driver&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String driver;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.url&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.username&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String user;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;jdbc.password&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span>(name = <span class="string">"runner"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> QueryRunner <span class="title">createRunner</span><span class="params">(@Qualifier(<span class="string">"ds1"</span>)</span> DataSource ds)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> QueryRunner(ds);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span>(name = <span class="string">"ds1"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> DataSource <span class="title">createDataSource</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ComboPooledDataSource ds = <span class="keyword">new</span> ComboPooledDataSource();</span><br><span class="line">            ds.setDriverClass(driver);</span><br><span class="line">            ds.setJdbcUrl(url);</span><br><span class="line">            ds.setUser(user);</span><br><span class="line">            ds.setPassword(password);</span><br><span class="line">            <span class="keyword">return</span> ds;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>Spring整合Junit的使用及问题</p>
<ol>
<li>Spring整合junit的配置<ol>
<li>导入spring整合junit的jar(坐标)</li>
<li>使用Junit提供的一个注解把原有的main方法替换了，替换成spring提供的<br>   @Runwith</li>
<li>告知spring的运行器，spring和ioc创建是基于xml还是注解的，并且说明位置<br>@ContextConfiguration<pre><code>locations：指定xml文件的位置，加上classpath关键字，表示在类路径下
classes：指定注解类所在地位置
</code></pre>当我们使用spring 5.x版本的时候，要求junit的jar必须是4.12及以上</li>
</ol>
</li>
<li>遇到的异常<br>Spring版本与Junit版本冲突会导致一些奇怪的异常:<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java.lang.NoClassDefFoundError: org/springframework/web/context/request/RequestAttributes</span><br><span class="line">java.lang.NoClassDefFoundError: javax/servlet/ServletContext</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>当bean的对象是由方法创建时<br>需要进行如下配置:</p>
 <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--配置代理的service--&gt;</span><br><span class="line">   &lt;bean id=<span class="string">"proxyAccountService"</span> factory-bean=<span class="string">"beanFactory"</span> factory-method=<span class="string">"getAccountService"</span>&gt;</span><br><span class="line"></span><br><span class="line">   &lt;/bean&gt;</span><br><span class="line">   &lt;!--配置代理beanFactory--&gt;</span><br><span class="line">   &lt;bean id=<span class="string">"beanFactory"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"jhmarryme.factoty.BeanFactory"</span>&gt;</span><br><span class="line">       &lt;property name=<span class="string">"accountService"</span> ref=<span class="string">"accountService"</span>/&gt;</span><br><span class="line">       &lt;property name=<span class="string">"transactionManager"</span> ref=<span class="string">"transactionManager"</span>/&gt;</span><br><span class="line">   &lt;/bean&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h2><ol>
<li><p>BeanFactory 和 ApplicationContext 的区别</p>
<p> ApplicationContext：只要一读取配置文件，默认情况下就会创建对象。<br> BeanFactory：什么使用什么时候创建对象。</p>
</li>
<li><p>ApplicationContext 接口的实现类</p>
<ul>
<li>ClassPathXmlApplicationContext：<br>它是从类的根路径下加载配置文件 推荐使用这种</li>
<li>FileSystemXmlApplicationContext：<br>它是从磁盘路径上加载配置文件，配置文件可以在磁盘的任意位置。</li>
<li>AnnotationConfigApplicationContext:<br>当我们使用注解配置容器对象时，需要使用此类来创建 spring 容器。它用来读取注解。</li>
</ul>
</li>
<li><p>四类注解<br>使用前bean.xml中导入xmlns:context中的约束 用于开启对注解的支持</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 用于创建对象的</span></span><br><span class="line"><span class="comment">*      他们的作用就和在XML配置文件中编写一个&lt;bean&gt;标签实现的功能是一样的</span></span><br><span class="line"><span class="comment">*      Component:</span></span><br><span class="line"><span class="comment">*          作用：用于把当前类对象存入spring容器中</span></span><br><span class="line"><span class="comment">*          属性：</span></span><br><span class="line"><span class="comment">*              value：用于指定bean的id。当我们不写时，它的默认值是当前类名，且首字母改小写。</span></span><br><span class="line"><span class="comment">*      Controller：一般用在表现层</span></span><br><span class="line"><span class="comment">*      Service：一般用在业务层</span></span><br><span class="line"><span class="comment">*      Repository：一般用在持久层</span></span><br><span class="line"><span class="comment">*      以上三个注解他们的作用和属性与Component是一模一样。</span></span><br><span class="line"><span class="comment">*      他们三个是spring框架为我们提供明确的三层使用的注解，使我们的三层对象更加清晰</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* 用于注入数据的</span></span><br><span class="line"><span class="comment">*      他们的作用就和在xml配置文件中的bean标签中写一个&lt;property&gt;标签的作用是一样的</span></span><br><span class="line"><span class="comment">*      Autowired:</span></span><br><span class="line"><span class="comment">*          作用：自动按照类型注入。只要容器中有唯一的一个bean对象类型和要注入的变量类型匹配，就可以注入成功</span></span><br><span class="line"><span class="comment">*                如果ioc容器中没有任何bean的类型和要注入的变量类型匹配，则报错。</span></span><br><span class="line"><span class="comment">*                如果Ioc容器中有多个类型匹配时：</span></span><br><span class="line"><span class="comment">*          出现位置：</span></span><br><span class="line"><span class="comment">*              可以是变量上，也可以是方法上</span></span><br><span class="line"><span class="comment">*          细节：</span></span><br><span class="line"><span class="comment">*              在使用注解注入时，set方法就不是必须的了。</span></span><br><span class="line"><span class="comment">*      Qualifier:</span></span><br><span class="line"><span class="comment">*          作用：在按照类中注入的基础之上再按照名称注入。它在给类成员注入时不能单独使用。但是在给方法参数注入时可以（稍后我们讲）</span></span><br><span class="line"><span class="comment">*          属性：</span></span><br><span class="line"><span class="comment">*              value：用于指定注入bean的id。</span></span><br><span class="line"><span class="comment">*      Resource</span></span><br><span class="line"><span class="comment">*          作用：直接按照bean的id注入。它可以独立使用</span></span><br><span class="line"><span class="comment">*          属性：</span></span><br><span class="line"><span class="comment">*              name：用于指定bean的id。</span></span><br><span class="line"><span class="comment">*      以上三个注入都只能注入其他bean类型的数据，而基本类型和String类型无法使用上述注解实现。</span></span><br><span class="line"><span class="comment">*      另外，集合类型的注入只能通过XML来实现。</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*      Value</span></span><br><span class="line"><span class="comment">*          作用：用于注入基本类型和String类型的数据</span></span><br><span class="line"><span class="comment">*          属性：</span></span><br><span class="line"><span class="comment">*              value：用于指定数据的值。它可以使用spring中SpEL(也就是spring的el表达式）</span></span><br><span class="line"><span class="comment">*                      SpEL的写法：$&#123;表达式&#125;</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* 用于改变作用范围的</span></span><br><span class="line"><span class="comment">*      他们的作用就和在bean标签中使用scope属性实现的功能是一样的</span></span><br><span class="line"><span class="comment">*      Scope</span></span><br><span class="line"><span class="comment">*          作用：用于指定bean的作用范围</span></span><br><span class="line"><span class="comment">*          属性：</span></span><br><span class="line"><span class="comment">*              value：指定范围的取值。常用取值：singleton prototype</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* 和生命周期相关 了解</span></span><br><span class="line"><span class="comment">*      他们的作用就和在bean标签中使用init-method和destroy-methode的作用是一样的</span></span><br><span class="line"><span class="comment">*      PreDestroy</span></span><br><span class="line"><span class="comment">*          作用：用于指定销毁方法</span></span><br><span class="line"><span class="comment">*      PostConstruct</span></span><br><span class="line"><span class="comment">*          作用：用于指定初始化方法</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>注解  待完成</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 该类是一个配置类，它的作用和bean.xml是一样的</span></span><br><span class="line"><span class="comment"> * spring中的新注解</span></span><br><span class="line"><span class="comment"> * Configuration</span></span><br><span class="line"><span class="comment"> *     作用：指定当前类是一个配置类</span></span><br><span class="line"><span class="comment"> *     细节：当配置类作为AnnotationConfigApplicationContext对象创建的参数时，该注解可以不写。</span></span><br><span class="line"><span class="comment"> * ComponentScan</span></span><br><span class="line"><span class="comment"> *      作用：用于通过注解指定spring在创建容器时要扫描的包</span></span><br><span class="line"><span class="comment"> *      属性：</span></span><br><span class="line"><span class="comment"> *          value：它和basePackages的作用是一样的，都是用于指定创建容器时要扫描的包。</span></span><br><span class="line"><span class="comment"> *                 我们使用此注解就等同于在xml中配置了:</span></span><br><span class="line"><span class="comment"> *                      &lt;context:component-scan base-package="com.itheima"&gt;&lt;/context:component-scan&gt;</span></span><br><span class="line"><span class="comment"> *  Bean</span></span><br><span class="line"><span class="comment"> *      作用：用于把当前方法的返回值作为bean对象存入spring的ioc容器中</span></span><br><span class="line"><span class="comment"> *      属性:</span></span><br><span class="line"><span class="comment"> *          name:用于指定bean的id。当不写时，默认值是当前方法的名称</span></span><br><span class="line"><span class="comment"> *      细节：</span></span><br><span class="line"><span class="comment"> *          当我们使用注解配置方法时，如果方法有参数，spring框架会去容器中查找有没有可用的bean对象。</span></span><br><span class="line"><span class="comment"> *          查找的方式和Autowired注解的作用是一样的</span></span><br><span class="line"><span class="comment"> *  Import</span></span><br><span class="line"><span class="comment"> *      作用：用于导入其他的配置类</span></span><br><span class="line"><span class="comment"> *      属性：</span></span><br><span class="line"><span class="comment"> *          value：用于指定其他配置类的字节码。</span></span><br><span class="line"><span class="comment"> *                  当我们使用Import的注解之后，有Import注解的类就父配置类，而导入的都是子配置类</span></span><br><span class="line"><span class="comment"> *  PropertySource</span></span><br><span class="line"><span class="comment"> *      作用：用于指定properties文件的位置</span></span><br><span class="line"><span class="comment"> *      属性：</span></span><br><span class="line"><span class="comment"> *          value：指定文件的名称和路径。</span></span><br><span class="line"><span class="comment"> *                  关键字：classpath，表示类路径下</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wangdaye7.github.io/2019/03/04/mybatis入门/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiahao Wang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jhmarryme's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/04/mybatis入门/" itemprop="url">mybatis入门</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-03T19:35:16Z">
                2019-03-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javaWeb/" itemprop="url" rel="index">
                    <span itemprop="name">javaWeb</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="day1"><a href="#day1" class="headerlink" title="day1"></a>day1</h1><h2 id="mybatis的理解"><a href="#mybatis的理解" class="headerlink" title="mybatis的理解"></a>mybatis的理解</h2><h2 id="使用mybatis的步骤"><a href="#使用mybatis的步骤" class="headerlink" title="使用mybatis的步骤"></a>使用mybatis的步骤</h2><p>主要按照这个步骤来做, 在其中具体配置文件的编写中, 参考<a href="http://www.mybatis.org/mybatis-3/zh/getting-started.html" target="_blank" rel="noopener">mybatis中文网</a>的内容填写, 注意其中的一些细节, 顺利完成. 在配置SqlMapConfig.xml中的properties属性时, 使用resource标签外部引用.properties文件.<br>第一步：创建 maven 工程<br>第二步：导入坐标<br>第三步：编写必要代码（实体类和持久层接口）<br>第四步：编写 SqlMapConfig.xml<br>    <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;? xml version = <span class="string">"1.0"</span> encoding = <span class="string">"UTF-8"</span> ?&gt;</span><br><span class="line">&lt; !DOCTYPE configuration</span><br><span class="line">PUBLIC <span class="string">"-//mybatis.org//DTD Config 3.0//EN"</span></span><br><span class="line"><span class="string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span> &gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&lt;configuration&gt;</span><br><span class="line">		&lt;properties resource=<span class="string">"jdbcConfig.properties"</span> /&gt;</span><br><span class="line"></span><br><span class="line">		&lt;typeAliases&gt;</span><br><span class="line">			&lt;!--&lt;typeAlias type=<span class="string">"jhmarryme.domain.User"</span> alias=<span class="string">"user"</span> /&gt;--&gt;</span><br><span class="line">		&lt;<span class="keyword">package</span> name=<span class="string">"jhmarryme.domain"</span> /&gt;</span><br><span class="line">		&lt;/typeAliases&gt;</span><br><span class="line">		&lt;environments <span class="keyword">default</span>=<span class="string">"mysql"</span>&gt;</span><br><span class="line">			&lt;environment id=<span class="string">"mysql"</span>&gt;</span><br><span class="line">				&lt;transactionManager type=<span class="string">"JDBC"</span> /&gt;</span><br><span class="line">				&lt;dataSource type=<span class="string">"POOLED"</span>&gt;</span><br><span class="line">					&lt;property name=<span class="string">"driver"</span> value=<span class="string">"$&#123;driver&#125;"</span> /&gt;</span><br><span class="line">					&lt;property name=<span class="string">"url"</span> value=<span class="string">"$&#123;url&#125;"</span> /&gt;</span><br><span class="line">					&lt;property name=<span class="string">"username"</span> value=<span class="string">"$&#123;username&#125;"</span> /&gt;</span><br><span class="line">					&lt;property name=<span class="string">"password"</span> value=<span class="string">"$&#123;password&#125;"</span> /&gt;</span><br><span class="line">				&lt;/dataSource&gt;</span><br><span class="line">			&lt;/environment&gt;</span><br><span class="line">		&lt;/environments&gt;</span><br><span class="line">		&lt;mappers&gt;</span><br><span class="line">			&lt;<span class="keyword">package</span> name=<span class="string">"jhmarryme.dao"</span> /&gt;</span><br><span class="line">			&lt;!--&lt;mapper resource=<span class="string">"jhmarryme/dao/IUserDao.xml"</span> /&gt;--&gt;</span><br><span class="line">	&lt;/mappers&gt;</span><br><span class="line">	&lt;/configuration&gt;</span><br></pre></td></tr></table></figure></p>
<p>第五步：编写映射配置文件<br>    <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span> ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">		PUBLIC <span class="string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span><br><span class="line">		<span class="string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;mapper namespace=<span class="string">"jhmarryme.dao.IUserDao"</span>&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!-- 查找所有用户信息--&gt;</span><br><span class="line">	&lt;select id=<span class="string">"findAllUser"</span> resultType=<span class="string">"jhmarryme.domain.User"</span>&gt;</span><br><span class="line">	select * from user</span><br><span class="line">&lt;/select&gt;</span><br><span class="line">&lt;!--查询总用户数--&gt;</span><br><span class="line">	&lt;select id=<span class="string">"findTotalUser"</span> resultType=<span class="string">"int"</span>&gt;</span><br><span class="line">	<span class="function">select <span class="title">count</span><span class="params">(id)</span> from user</span></span><br><span class="line"><span class="function">&lt;/select&gt;</span></span><br><span class="line"><span class="function">	&lt;!--保存一个用户, 并返回表中自增的id--&gt;</span></span><br><span class="line"><span class="function">	&lt;insert id</span>=<span class="string">"saveUser"</span> parameterType=<span class="string">"jhmarryme.domain.User"</span>&gt;</span><br><span class="line">		&lt;selectKey keyProperty=<span class="string">"id"</span> keyColumn=<span class="string">"id"</span> resultType=<span class="string">"int"</span>&gt;</span><br><span class="line">			<span class="function">select <span class="title">last_insert_id</span><span class="params">()</span></span>;</span><br><span class="line">		&lt;/selectKey&gt;</span><br><span class="line">		<span class="function">insert into <span class="title">user</span><span class="params">(username, address, birthday, sex)</span></span></span><br><span class="line"><span class="function">		<span class="title">values</span><span class="params">(#&#123;username&#125;, #&#123;address&#125;, #&#123;birthday&#125;, #&#123;sex&#125;)</span></span></span><br><span class="line"><span class="function">	&lt;/insert&gt;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">	&lt;!-- 根据条件查询相关的用户 --&gt;</span></span><br><span class="line"><span class="function">	&lt;select id</span>=<span class="string">"findUserByCondition"</span> resultType=<span class="string">"user"</span> parameterType=<span class="string">"user"</span>&gt;</span><br><span class="line">		select * from user</span><br><span class="line">		&lt;where&gt;</span><br><span class="line">			&lt;<span class="keyword">if</span> test=<span class="string">"username != null"</span>&gt;</span><br><span class="line">			and username like #&#123;username&#125;</span><br><span class="line">			&lt;/if&gt;</span><br><span class="line">			&lt;<span class="keyword">if</span> test=<span class="string">"address != null"</span>&gt;</span><br><span class="line">				and address like #&#123;address&#125;</span><br><span class="line">			&lt;/if&gt;</span><br><span class="line">		&lt;/where&gt;</span><br><span class="line">	&lt;/select&gt;</span><br><span class="line"></span><br><span class="line">	&lt;!--查询id在集合中的用户--&gt;</span><br><span class="line">	&lt;select id=<span class="string">"findUserInIds"</span> parameterType=<span class="string">"pojovo"</span> resultType=<span class="string">"user"</span>&gt;</span><br><span class="line">		select * from user</span><br><span class="line">		&lt;where&gt;</span><br><span class="line">			&lt;<span class="keyword">if</span> test=<span class="string">"ids != null and ids.size() &gt;0"</span>&gt;</span><br><span class="line">				&lt;foreach collection=<span class="string">"ids"</span> open=<span class="string">"and id in("</span> close=<span class="string">")"</span> item=<span class="string">"id"</span> separator=<span class="string">","</span>&gt;</span><br><span class="line">					#&#123;id&#125;</span><br><span class="line">				&lt;/foreach&gt;</span><br><span class="line">			&lt;/if&gt;</span><br><span class="line">		&lt;/where&gt;</span><br><span class="line">	&lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure></p>
<p>第六步：编写测试类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBatisTest</span> </span>&#123;</span><br><span class="line">    SqlSessionFactory sqlSessionFactory;</span><br><span class="line">    SqlSession session;</span><br><span class="line">    IUserDao userDao;</span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String resource = <span class="string">"SqlMapConfig.xml"</span>;</span><br><span class="line">        InputStream inputStream = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line"></span><br><span class="line">        session = sqlSessionFactory.openSession();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            userDao = session.getMapper(IUserDao.class);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 测试查找总用户</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;User&gt; users = userDao.findAllUser();</span><br><span class="line">        <span class="keyword">for</span> (User user: users</span><br><span class="line">             ) &#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 测试查找总用户数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testTotalUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> totalUser = userDao.findTotalUser();</span><br><span class="line">        System.out.println(totalUser);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSaveUser</span><span class="params">()</span></span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setUsername(<span class="string">"江航12"</span>);</span><br><span class="line">        user.setBirthday(<span class="keyword">new</span> Date());</span><br><span class="line">        user.setAddress(<span class="string">"北碚"</span>);</span><br><span class="line">        user.setSex(<span class="string">"女"</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(user);</span><br><span class="line">        userDao.saveUser(user);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        session.commit();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testUpdateUser</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindUserByCondition</span><span class="params">()</span></span>&#123;</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        user.setUsername(<span class="string">"%王%"</span>);</span><br><span class="line">        user.setAddress(<span class="string">"%金燕龙%"</span>);</span><br><span class="line">        List&lt;User&gt; users = userDao.findUserByCondition(user);</span><br><span class="line">        <span class="keyword">for</span> (User u: users)&#123;</span><br><span class="line">            System.out.println(u);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询id在集合中的所有用户信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testFindInIds</span><span class="params">()</span></span>&#123;</span><br><span class="line">        List&lt;Integer&gt; ids = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line"></span><br><span class="line">        ids.add(<span class="number">50</span>);</span><br><span class="line">        ids.add(<span class="number">41</span>);</span><br><span class="line">        PojoVo vo = <span class="keyword">new</span> PojoVo();</span><br><span class="line">        vo.setIds(ids);</span><br><span class="line"></span><br><span class="line">        List&lt;User&gt; users = userDao.findUserInIds(vo);</span><br><span class="line">        <span class="keyword">for</span> (User u: users)&#123;</span><br><span class="line">            System.out.println(u);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="Mybatis基本用法记录"><a href="#Mybatis基本用法记录" class="headerlink" title="Mybatis基本用法记录"></a>Mybatis基本用法记录</h2><h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><ol>
<li>导入坐标时没有mybatis的提示, 第一反应肯定是仓库里找不到这个包, 打开设置, 找到maven的设置, 发现maven使用的是默认的版本, 于是乎更换之前下载的版本, 其中配置好了本地仓库的位置. 问题解决</li>
</ol>
<h2 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h2><ol>
<li><p>SqlMapConfig.xml 中配置的内容和顺序</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-properties（属性）</span><br><span class="line">    --property</span><br><span class="line">-settings（全局配置参数）</span><br><span class="line">    --setting</span><br><span class="line">-typeAliases（类型别名）</span><br><span class="line">    --typeAliase</span><br><span class="line">    --<span class="keyword">package</span></span><br><span class="line">-typeHandlers（类型处理器）</span><br><span class="line">-objectFactory（对象工厂）</span><br><span class="line">-plugins（插件）</span><br><span class="line">-environments（环境集合属性对象）</span><br><span class="line">    --environment（环境子属性对象）</span><br><span class="line">        ---transactionManager（事务管理）</span><br><span class="line">        ---dataSource（数据源）</span><br><span class="line">-mappers（映射器）</span><br><span class="line">    --mapper</span><br><span class="line">    --<span class="keyword">package</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>jdbcConfig.properties<br>如下:</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc.driver=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url=jdbc:mysql:<span class="comment">//localhost:3306/ee42</span></span><br><span class="line">jdbc.username=root</span><br><span class="line">jdbc.password=<span class="number">1234</span></span><br></pre></td></tr></table></figure>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wangdaye7.github.io/2019/02/27/hexo使用记录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiahao Wang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jhmarryme's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/27/hexo使用记录/" itemprop="url">hexo使用记录</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-26T23:43:53Z">
                2019-02-26
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/hexo/" itemprop="url" rel="index">
                    <span itemprop="name">hexo</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="添加分类及标签"><a href="#添加分类及标签" class="headerlink" title="添加分类及标签"></a>添加分类及标签</h2><h3 id="创建“分类”选项"><a href="#创建“分类”选项" class="headerlink" title="创建“分类”选项"></a>创建“分类”选项</h3><ol>
<li><p><strong>生成“分类”页并添加tpye属性</strong><br> 打开命令行，进入博客所在文件夹。执行命令</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> page categories</span><br></pre></td></tr></table></figure>
<p> 根据提示信息找到index.md, 添加type: “categories”到内容中，添加后是这样的：</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 文章分类</span><br><span class="line">date: <span class="number">2017</span>-<span class="number">05</span>-<span class="number">27</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">40</span></span><br><span class="line">type: <span class="string">"categories"</span></span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p> 保存并关闭文件。</p>
</li>
<li><p><strong>给文章添加“categories”属性</strong><br>打开需要添加分类的文章，为其添加categories属性。下方的categories: web前端表示添加这篇文章到“web前端”这个分类。注意：hexo一篇文章只能属于一个分类，也就是说如果在“- web前端”下方添加“-xxx”，hexo不会产生两个分类，而是把分类嵌套（即该文章属于 “- web前端”下的 “-xxx ”分类）。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: hexo使用记录</span><br><span class="line">date: <span class="number">2019</span>-<span class="number">02</span>-<span class="number">26</span> <span class="number">23</span>:<span class="number">43</span>:<span class="number">53</span></span><br><span class="line">categories:</span><br><span class="line">- hexo</span><br><span class="line">tags:</span><br><span class="line">- hexo</span><br><span class="line">- 博客</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="创建“标签”选项"><a href="#创建“标签”选项" class="headerlink" title="创建“标签”选项"></a>创建“标签”选项</h3><p>同上, 只需要把categories替换为tags即可</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wangdaye7.github.io/2019/02/26/vue入门学习/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiahao Wang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jhmarryme's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/26/vue入门学习/" itemprop="url">vue入门学习</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-26T12:24:13Z">
                2019-02-26
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/javaWeb/" itemprop="url" rel="index">
                    <span itemprop="name">javaWeb</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="学习的路线"><a href="#学习的路线" class="headerlink" title="学习的路线"></a>学习的路线</h2><ol>
<li>Vue概述</li>
<li>Vue的快速入门</li>
<li>Vue的语法<ul>
<li>插值表达式</li>
<li>事件的绑定</li>
<li>数据的显示</li>
<li>逻辑判断和循环输出</li>
</ul>
</li>
<li>Vue的生命周期<ul>
<li>8个生命周期的执行点<ul>
<li>4个基本的</li>
<li>4个特殊的</li>
</ul>
</li>
</ul>
</li>
<li>axios的ajax异步请求<ul>
<li>它和jquery的ajax比较相似</li>
</ul>
</li>
<li>综合案例<ul>
<li>实现用户的查询列表和更新操作<ul>
<li>前端：Vue</li>
<li>后端：ssm</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="helloWord的创建"><a href="#helloWord的创建" class="headerlink" title="helloWord的创建"></a>helloWord的创建</h3><ol>
<li>选择maven-&gt;webapp模板, 补全java, resources, test文件夹</li>
<li>run -&gt; edit configuration-&gt;添加tomcat local</li>
<li><p>script代码</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">		<span class="comment">//view model</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">//创建一个vue对象</span></span><br><span class="line">		<span class="keyword">new</span> Vue(&#123;</span><br><span class="line">			el:<span class="string">"#app"</span>, <span class="comment">//接管id为app的区域</span></span><br><span class="line">			data:&#123;</span><br><span class="line">			    message:<span class="string">"Hello world, Vue"</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">	&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>html代码</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"app"</span>&gt;</span><br><span class="line">	&#123;&#123;message&#125;&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>补充tomcat的设置, 使代码更新后无需重新部署即可同步更新到浏览器</p>
<ul>
<li>run -&gt; edit configuration-&gt;Tomcat 下的deployment 选择后缀为explode的 项目war</li>
<li>在server进行更新设置</li>
</ul>
</li>
</ol>
<h3 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h3><h4 id="keyDown事件的用法"><a href="#keyDown事件的用法" class="headerlink" title="keyDown事件的用法"></a>keyDown事件的用法</h4><p>使用event.keyCode获取按下的键, 对按下的键进行控制, event.preventDefault()阻止事件, .stopPopagation()阻止传播</p>
<h4 id="vue接收event需要加上-并且可使用-代替v-on"><a href="#vue接收event需要加上-并且可使用-代替v-on" class="headerlink" title="vue接收event需要加上$, 并且可使用@代替v:on"></a>vue接收<strong>event</strong>需要加上<strong>$</strong>, 并且可使用<strong>@</strong>代替v:on</h4><h4 id="按键修饰符的使用"><a href="#按键修饰符的使用" class="headerlink" title="按键修饰符的使用"></a>按键修饰符的使用</h4><p>@keyDown.enter=”fun1” 当回车被按下的时候执行fun1函数</p>
<h4 id="使用v-bind给标签的属性赋值"><a href="#使用v-bind给标签的属性赋值" class="headerlink" title="使用v-bind给标签的属性赋值"></a>使用v-bind给标签的属性赋值</h4><ul>
<li>可用:简化书写</li>
<li>:color=”ys1”, 在Vue对象中定义ys1的值</li>
<li>直接使用插值表达式不会生效</li>
</ul>
<h4 id="v-on的事件修饰符"><a href="#v-on的事件修饰符" class="headerlink" title="v-on的事件修饰符"></a>v-on的事件修饰符</h4><p>常用的两个:</p>
<ul>
<li>.stop</li>
<li>.prevent<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"app"</span>&gt;</span><br><span class="line">    &lt;form <span class="meta">@submit</span>.prevent action=<span class="string">"http://www.itcast.cn"</span> method=<span class="string">"get"</span>&gt;</span><br><span class="line">        &lt;input type=<span class="string">"submit"</span> value=<span class="string">"提交"</span> /&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">    &lt;div <span class="meta">@click</span>=<span class="string">"fun1"</span>&gt;</span><br><span class="line">        &lt;a @click.stop href="http://www.itcast.cn"&gt;itcast&lt;/a&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">        el: <span class="string">'#app'</span>, <span class="comment">//表示当前vue对象接管了div区域</span></span><br><span class="line">        methods: &#123;</span><br><span class="line">            fun1: function () &#123;</span><br><span class="line">                alert(<span class="string">"hello itcast"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="v-text和v-html"><a href="#v-text和v-html" class="headerlink" title="v-text和v-html"></a>v-text和v-html</h4><p>在标签内使用v-text=”message”, message在Vue对象中赋值</p>
<h4 id="v-for的使用"><a href="#v-for的使用" class="headerlink" title="v-for的使用"></a>v-for的使用</h4><ol>
<li><p>列表中的使用</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;li v-<span class="keyword">for</span>=<span class="string">"(item, index) in list"</span>&gt; <span class="comment">//索引在后</span></span><br><span class="line">    &#123;&#123;index + <span class="string">"  "</span> + item&#125;&#125;</span><br><span class="line">&lt;/li&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>对象中的使用</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;li v-<span class="keyword">for</span>=<span class="string">"(value, key) in wjh"</span>&gt;</span><br><span class="line">    &#123;&#123;key + <span class="string">"  "</span> + value&#125;&#125;</span><br><span class="line">&lt;/li&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>对象数组中的使用</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;table&gt;</span><br><span class="line">    &lt;tr v-<span class="keyword">for</span>=<span class="string">"p in person"</span>&gt;</span><br><span class="line">        &lt;td&gt;&#123;&#123;p.name&#125;&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;&#123;&#123;p.age&#125;&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;&#123;&#123;p.sex&#125;&#125;&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">&lt;/table&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="v-model的使用"><a href="#v-model的使用" class="headerlink" title="v-model的使用"></a>v-model的使用</h4><p>用于控制表单input中的value<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"app"</span>&gt;</span><br><span class="line">    姓名:&lt;input type=<span class="string">"text"</span> id=<span class="string">"username"</span> v-model=<span class="string">"user.username"</span>&gt;&lt;br&gt;</span><br><span class="line">    密码:&lt;input type=<span class="string">"password"</span> id=<span class="string">"password"</span> v-model=<span class="string">"user.password"</span>&gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=<span class="string">"button"</span> <span class="meta">@click</span>=<span class="string">"fun"</span> value=<span class="string">"获取"</span>&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">	el:<span class="string">'#app'</span>, <span class="comment">//表示当前vue对象接管了div区域</span></span><br><span class="line">	data:&#123;</span><br><span class="line">	user:&#123;username:<span class="string">""</span>,password:<span class="string">""</span>&#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods:&#123;</span><br><span class="line">fun:function()&#123;</span><br><span class="line">	alert(<span class="keyword">this</span>.user.username+<span class="string">" "</span>+<span class="keyword">this</span>.user.password);</span><br><span class="line">	<span class="keyword">this</span>.user.username=<span class="string">"tom"</span>;</span><br><span class="line">	<span class="keyword">this</span>.user.password=<span class="string">"11111111"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h4 id="v-if与v-show"><a href="#v-if与v-show" class="headerlink" title="v-if与v-show"></a>v-if与v-show</h4><p>v-if=”true/false” 控制元素是否显示, 可以使用vue对象的data控制</p>
<h4 id="声明周期"><a href="#声明周期" class="headerlink" title="声明周期"></a>声明周期</h4><p>vue对象初始化过程中，会执行到beforeCreate,created,beforeMount,mounted 这几个钩子的内容</p>
<ul>
<li>beforeCreate ：数据还没有监听，没有绑定到vue对象实例，同时也没有挂载对象</li>
<li>created ：数据已经绑定到了对象实例，但是还没有挂载对象</li>
<li>beforeMount: 模板已经编译好了，根据数据和模板已经生成了对应的元素对象，将数据对象关联到了对象的<br>el属性，el属性是一个HTMLElement对象，也就是这个阶段，vue实例通过原生的createElement等方法来创<br>建这个html片段，准备注入到我们vue实例指明的el属性所对应的挂载点</li>
<li>mounted:将el的内容挂载到了el，相当于我们在jquery执行了(el).html(el),生成页面上真正的dom，上面我们<br>就会发现dom的元素和我们el的元素是一致的。在此之后，我们能够用方法来获取到el元素下的dom对象，并<br>进 行各种操作</li>
<li><p>当我们的data发生改变时，会调用beforeUpdate和updated方法</p>
<ul>
<li><p>beforeUpdate ：数据更新到dom之前，我们可以看到$el对象已经修改，但是我们页面上dom的数据还<br>没有发生改变</p>
</li>
<li><p>updated: dom结构会通过虚拟dom的原则，找到需要更新页面dom结构的最小路径，将改变更新到<br>dom上面，完成更新</p>
</li>
</ul>
</li>
<li>beforeDestroy,destroed :实例的销毁，vue实例还是存在的，只是解绑了事件的监听还有watcher对象数据<br>与view的绑定，即数据驱动</li>
</ul>
<h4 id="ajax的应用"><a href="#ajax的应用" class="headerlink" title="ajax的应用"></a>ajax的应用</h4><ul>
<li><p>引入axios<br>Axios 是一个基于 promise 的 HTTP 库，可以用在浏览器和 node.js 中<br>axios的github:<a href="https://github.com/axios/axios" target="_blank" rel="noopener">https://github.com/axios/axios</a></p>
<ul>
<li><p>get</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过给定的ID来发送请求</span></span><br><span class="line">axios.get(<span class="string">'/user?ID=12345'</span>)</span><br><span class="line">.then(function(response)&#123;</span><br><span class="line">	console.log(response);</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="keyword">catch</span>(function(err)&#123;</span><br><span class="line">	console.log(err);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//以上请求也可以通过这种方式来发送</span></span><br><span class="line">axios.get(<span class="string">'/user'</span>,&#123;</span><br><span class="line">	params:&#123;</span><br><span class="line">	ID:<span class="number">12345</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line">.then(function(response)&#123; <span class="comment">//回调函数</span></span><br><span class="line">	console.log(response);</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="keyword">catch</span>(function(err)&#123; <span class="comment">//捕获异常</span></span><br><span class="line">	console.log(err);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>post</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">axios.post(<span class="string">'/user'</span>,&#123;</span><br><span class="line">	firstName:<span class="string">'Fred'</span>,</span><br><span class="line">	lastName:<span class="string">'Flintstone'</span></span><br><span class="line">&#125;)</span><br><span class="line">.then(function(res)&#123;</span><br><span class="line">	console.log(res);</span><br><span class="line">&#125;)</span><br><span class="line">.<span class="keyword">catch</span>(function(err)&#123;</span><br><span class="line">	console.log(err);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wangdaye7.github.io/2019/02/25/旅游网项目记录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiahao Wang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jhmarryme's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/25/旅游网项目记录/" itemprop="url">旅游网项目记录</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-24T23:26:40Z">
                2019-02-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="基于黑马java的一个初始项目完成-只完成后台功能-复习之前学习的一些内容-巩固知识"><a href="#基于黑马java的一个初始项目完成-只完成后台功能-复习之前学习的一些内容-巩固知识" class="headerlink" title="基于黑马java的一个初始项目完成, 只完成后台功能, 复习之前学习的一些内容, 巩固知识"></a>基于黑马java的一个初始项目完成, 只完成后台功能, 复习之前学习的一些内容, 巩固知识</h2><h2 id="技术选型"><a href="#技术选型" class="headerlink" title="技术选型"></a>技术选型</h2><ol>
<li>Web层<ul>
<li>Servlet：前端控制器</li>
<li>html：视图</li>
<li>Filter：过滤器</li>
<li>BeanUtils：数据封装</li>
<li>Jackson：json序列化工具</li>
</ul>
</li>
<li>Service层<ul>
<li>Javamail：java发送邮件工具</li>
<li>Redis：nosql内存数据库</li>
<li>Jedis：java的redis客户端</li>
</ul>
</li>
<li>Dao层<ul>
<li>Mysql：数据库</li>
<li>Druid：数据库连接池</li>
<li>JdbcTemplate：jdbc的工具</li>
</ul>
</li>
</ol>
<h2 id="项目准备阶段"><a href="#项目准备阶段" class="headerlink" title="项目准备阶段"></a>项目准备阶段</h2><ol>
<li>项目导入<ul>
<li>项目存在于<a href>项目地址</a> 补充:待上传</li>
<li>使用idea右侧的maven projects入口中的+, 选中项目根文件夹下的pom.xml, 完成导入</li>
</ul>
</li>
<li>项目启动</li>
<li>创建数据库相关, 根据提供的SQL文件完成</li>
</ol>
<h2 id="相应功能实现"><a href="#相应功能实现" class="headerlink" title="相应功能实现"></a>相应功能实现</h2><h3 id="注册功能"><a href="#注册功能" class="headerlink" title="注册功能"></a>注册功能</h3><ul>
<li>页面效果<img src="./旅游网项目记录/注册表单.png" alt="页面效果"></li>
<li>功能分析</li>
<li><p>代码实现</p>
<ul>
<li><p>前台代码实现</p>
<ul>
<li>表单校验</li>
<li>异步ajax提交表单<br>在这里我采用首先设置jQuery对象插件的方式实现check功能, 对输入框的校验功能和设置样式通过调用check完成<br>部分代码如下:<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">$.fn.extend(&#123;</span><br><span class="line">	<span class="comment">//判断正则表达式是否匹配</span></span><br><span class="line">	<span class="comment">//当不匹配时, 将输入框边框置红</span></span><br><span class="line">	check: function (reg) &#123;</span><br><span class="line">		<span class="keyword">var</span> flag = reg.test($(<span class="keyword">this</span>).val());</span><br><span class="line">		<span class="comment">//当正则匹配时, 恢复边框</span></span><br><span class="line">		<span class="keyword">if</span> (flag) &#123;</span><br><span class="line">			$(<span class="keyword">this</span>).css(<span class="string">"border"</span>, <span class="string">""</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;<span class="comment">//置红</span></span><br><span class="line">			$(<span class="keyword">this</span>).css(<span class="string">"border"</span>, <span class="string">"1px solid red"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> flag;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="function">function <span class="title">checkForm</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">//校验表单</span></span><br><span class="line">	<span class="keyword">return</span> (checkUsername() &amp;&amp; checkPassword() &amp;&amp; checkEmail());</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">function <span class="title">checkUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> $(<span class="string">"#username"</span>).check(/^\w&#123;<span class="number">8</span>,<span class="number">20</span>&#125;$/);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">function <span class="title">checkPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> $(<span class="string">"#password"</span>).check(/^\w&#123;<span class="number">8</span>,<span class="number">20</span>&#125;$/);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">function <span class="title">checkEmail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> $(<span class="string">"#email"</span>).check(/^([A-Za-z0-<span class="number">9</span>_\-\.])+\@([A-Za-z0-<span class="number">9</span>_\-\.])+\.([A-Za-z]&#123;<span class="number">2</span>,<span class="number">4</span>&#125;)$/);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//入口函数</span></span><br><span class="line">$(function () &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	设置各个输入框的失去焦点的校验事件</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	$(<span class="string">"#username"</span>).blur(checkUsername);</span><br><span class="line">	$(<span class="string">"#password"</span>).blur(checkPassword);</span><br><span class="line">	$(<span class="string">"#email"</span>).blur(checkEmail);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//定义表单的提交</span></span><br><span class="line">	$(<span class="string">"#registerForm"</span>).submit(function () &#123;</span><br><span class="line">		<span class="comment">//如果表单校验通过, 则使用ajax方式提交表单数据</span></span><br><span class="line">		<span class="keyword">if</span> (checkForm()) &#123;</span><br><span class="line">			$.post(<span class="string">"servlet/registerUserServlet"</span>, $(<span class="string">"#registerForm"</span>).serialize(), function (data) &#123;</span><br><span class="line">				<span class="comment">//处理返回的数据</span></span><br><span class="line"></span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">//不使用常规方式提交</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>后台代码实现</p>
<ul>
<li><p>编写registUserServlet<br>部分代码如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	校验验证码    **待完成</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line"><span class="comment">//封装表单数据</span></span><br><span class="line">User user = <span class="keyword">new</span> User();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">	BeanUtils.populate(user, request.getParameterMap());</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">	e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//判断用户是否可注册</span></span><br><span class="line">UserService userService = <span class="keyword">new</span> UserServiceImpl();</span><br><span class="line">Boolean flag = userService.regist(user);</span><br><span class="line"><span class="comment">//创建结果集</span></span><br><span class="line">ResultInfo info = <span class="keyword">new</span> ResultInfo();</span><br><span class="line"><span class="comment">//如果flag=true, 注册成功</span></span><br><span class="line"><span class="keyword">if</span> (flag) &#123;</span><br><span class="line">	info.setFlag(<span class="keyword">true</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">	info.setFlag(<span class="keyword">false</span>);</span><br><span class="line">	info.setErrorMsg(<span class="string">"注册失败, 用户名已存在"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 错误信息存放在ResultInfo对象中, 将此对象转换为json, 使用输出流输出</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">String str_info = mapper.writeValueAsString(info);</span><br><span class="line">response.getWriter().write(str_info);</span><br></pre></td></tr></table></figure>
</li>
<li><p>service<br>部分代码如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	* 完成注册功能</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">	* <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Boolean <span class="title">regist</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">	User u_find = userDao.findUserByUsername(user);</span><br><span class="line">	<span class="keyword">if</span> (u_find != <span class="keyword">null</span>) &#123;</span><br><span class="line">		<span class="comment">//用户名不可用, 注册失败</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		* 在完成注册最后一步之前, 设置用户的激活状态, 验证码, 完成发送邮件功能</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line">		user.setStatus(<span class="string">"N"</span>);</span><br><span class="line"></span><br><span class="line">		String code = UuidUtil.getUuid();</span><br><span class="line">		user.setCode(code);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		String email = <span class="string">"&lt;a href='http://localhost/travel/activeUserServlet?code="</span> + user.getCode() + <span class="string">"'&gt;点击激活&lt;/a&gt;"</span>;</span><br><span class="line">		MailUtils.sendMail(user.getEmail(), email, <span class="string">"test"</span>);</span><br><span class="line">		System.out.println(user.getEmail());</span><br><span class="line">		<span class="comment">//完成注册功能</span></span><br><span class="line">		userDao.saveUser(user);</span><br><span class="line"></span><br><span class="line">	&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">		<span class="comment">//出现异常, 注册失败</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="邮箱验证"><a href="#邮箱验证" class="headerlink" title="邮箱验证"></a>邮箱验证</h3><p>当账号注册后往用户填写的邮箱中发送一封<strong>激活邮件</strong>, 只有当用户点击了激活邮件时, 才算是注册完成.<br>所以在Service层的注册功能中添加此功能, 通过设置user.status为’N’, 表示用户现在尚未激活, 此时生成一个激活码, 并将此激活码存入用户信息中, 在向用户发送邮件的时候使用此验证码作为激活的标准.</p>
<ul>
<li>发送邮件<br>  使用java的邮件工具类<em>MailUtils</em>, 调用其中sendMail方法可以完成邮件发送<ul>
<li>无法发送邮件 提示非法地址<br>  没有正确填写邮件地址</li>
<li>无法发送邮件 错误代码535<br>  需要在邮箱内开启授权码, 然后填写在配置中 </li>
<li>接受到的邮件乱码<br>  需要将发送邮件所在函数的文件格式改为UTF-8</li>
</ul>
<ul>
<li>用户点击邮件激活<br>  设置status的状态值为’Y’, 完成激活</li>
<li>修改userDao中的save方法, 加上status, code<br>部分代码如下:<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">active</span><span class="params">(String code)</span> </span>&#123;</span><br><span class="line">	<span class="comment">//判断code是否有效, 有效则接受一个user对象</span></span><br><span class="line">	User user = userDao.findUserByCode(code);</span><br><span class="line">	<span class="keyword">if</span> (user == <span class="keyword">null</span>) &#123;</span><br><span class="line">		<span class="comment">//验证码无效, 激活失败</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//设置用户的status为'Y' 激活用户</span></span><br><span class="line">	userDao.updateUserStatus(user);</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="登陆功能"><a href="#登陆功能" class="headerlink" title="登陆功能"></a>登陆功能</h3><p>根据用户输入的账号密码进行登陆</p>
<ul>
<li>前台代码实现<ol>
<li>给登陆按钮绑定一个提交事件<ul>
<li>使用ajax进行提交</li>
<li>对响应的信息进行处理<ul>
<li>登陆成功, 跳转到首页</li>
<li>登陆失败, 显示提示信息</li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
<li>后台代码实现<ul>
<li>servlet<ol>
<li>接收用户的账户和密码</li>
<li>调用service层进行登陆, 返回一个user<ul>
<li>登陆成功, 设置info, 并且将用户存入session.</li>
<li>登陆失败, 设置ResultInfo对象提示信息</li>
<li>尚未激活, 提示进行激活</li>
</ul>
</li>
<li>将ResultInfo用json方式响应</li>
</ol>
</li>
<li>service<ol>
<li>根据账号密码查询用户 findUserByUsernameAndPassword(user……)</li>
<li>返回查找的user对象</li>
</ol>
</li>
<li>dao<br>完成对应功能</li>
</ul>
</li>
</ul>
<p>部分代码如下:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">	<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">		<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">		request.setCharacterEncoding(<span class="string">"UTF-8"</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//      1. 接收用户的账户和密码</span></span><br><span class="line">		User user = <span class="keyword">new</span> User();</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			BeanUtils.populate(user, request.getParameterMap());</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//        2. 调用service层进行登陆, 返回一个user</span></span><br><span class="line">		UserService userService = <span class="keyword">new</span> UserServiceImpl();</span><br><span class="line">		user = userService.login(user);</span><br><span class="line"></span><br><span class="line">		ResultInfo info = <span class="keyword">new</span> ResultInfo();</span><br><span class="line">		<span class="keyword">if</span> (user == <span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="comment">//                * 登陆失败, 设置ResultInfo对象提示信息</span></span><br><span class="line">			info.setFlag(<span class="keyword">false</span>);</span><br><span class="line">			info.setErrorMsg(<span class="string">"用户名或密码错误"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (user != <span class="keyword">null</span> &amp;&amp; !<span class="string">"Y"</span>.equals(user.getStatus())) &#123;</span><br><span class="line">			<span class="comment">//                * 尚未激活, 提示进行激活</span></span><br><span class="line">			info.setFlag(<span class="keyword">false</span>);</span><br><span class="line">			info.setErrorMsg(<span class="string">"尚未激活的账户"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (user != <span class="keyword">null</span> &amp;&amp; <span class="string">"Y"</span>.equals(user.getStatus())) &#123;</span><br><span class="line">			<span class="comment">//  登陆成功, 设置info, 并且将用户存入session.</span></span><br><span class="line">			info.setFlag(<span class="keyword">true</span>);</span><br><span class="line">			request.getSession().setAttribute(<span class="string">"user"</span>, user);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//        3. 将ResultInfo用json方式响应</span></span><br><span class="line">		response.setContentType(<span class="string">"application/json;charset=utf-8"</span>);</span><br><span class="line">		ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">		mapper.writeValue(response.getOutputStream(), info);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">		doPost(request, response);</span><br><span class="line">	&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	*********************************************</span><br><span class="line">	<span class="function"><span class="keyword">public</span> User <span class="title">login</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//        1. 根据账号密码查询用户 findUserByUsernameAndPassword(user......)</span></span><br><span class="line">    <span class="comment">//        2. 返回查找的user对象</span></span><br><span class="line">    <span class="keyword">return</span> userDao.finUserByUsernameAndPassword(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="退出功能"><a href="#退出功能" class="headerlink" title="退出功能"></a>退出功能</h3><ol>
<li><p>前台<br> button绑定一个事件, 点击后跳转到exitServlet</p>
 <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href="javascript:location.href='exitServlet';"&gt;退出&lt;/a&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>servlet<br> 销毁session对象</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request.getSession().invalidate();</span><br></pre></td></tr></table></figure>
<p> 重定向到登陆界面, 不使用转发</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.sendRedirect(request.getContextPath() + <span class="string">"/login.html"</span>);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="header中的姓名提示功能"><a href="#header中的姓名提示功能" class="headerlink" title="header中的姓名提示功能"></a>header中的姓名提示功能</h3><p>因为是HTML文件, 不能使用域对象, 在这里采取ajax的方式请求findUserServlet,然后在servlet中查找域对象, 用json响应回HTML.</p>
<ul>
<li><p>jQuery</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$(function () &#123;</span><br><span class="line">	<span class="comment">//加载页面时发送ajax请求显示用户名</span></span><br><span class="line">	$.get(<span class="string">"findUserServlet"</span>, &#123;&#125;,</span><br><span class="line">		function (data) &#123;</span><br><span class="line">			<span class="comment">//将用户名显示到界面上</span></span><br><span class="line">			$(<span class="string">"#user_msg"</span>).text(<span class="string">"欢迎回来,"</span> + data.username);</span><br><span class="line">		&#125;</span><br><span class="line">	);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>servlet</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//取出session中的user对象</span></span><br><span class="line">User user = (User) request.getSession().getAttribute(<span class="string">"user"</span>);</span><br><span class="line"></span><br><span class="line">ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line"><span class="comment">//设置响应信息格式</span></span><br><span class="line">response.setContentType(<span class="string">"application/json;charset=utf-8"</span>);</span><br><span class="line">mapper.writeValue(response.getOutputStream(), user);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="犯的错误"><a href="#犯的错误" class="headerlink" title="犯的错误"></a>犯的错误</h2><pre><code>多次在dao层进行查询的时候只创建了user对象, 却没有使用此对象接收查询的结果
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wangdaye7.github.io/2019/02/25/hexo入门/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiahao Wang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jhmarryme's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/25/hexo入门/" itemprop="url">hexo入门</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-24T21:23:30Z">
                2019-02-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/hexo/" itemprop="url" rel="index">
                    <span itemprop="name">hexo</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="参考网址"><a href="#参考网址" class="headerlink" title="参考网址"></a>参考网址</h2><ul>
<li><a href="https://hexo.io/zh-cn/docs" target="_blank" rel="noopener">hexo中文网</a></li>
<li><a href="https://theme-next.iissnan.com" target="_blank" rel="noopener">next主题</a></li>
</ul>
<h2 id="遇到的一些问题"><a href="#遇到的一些问题" class="headerlink" title="遇到的一些问题"></a>遇到的一些问题</h2><h3 id="主题设置"><a href="#主题设置" class="headerlink" title="主题设置"></a>主题设置</h3><ol>
<li>设置主题后本地预览没有效果<ul>
<li>重新生成整个博客文档解决, 暂无找到其他方法</li>
</ul>
</li>
</ol>
<h3 id="编写文章"><a href="#编写文章" class="headerlink" title="编写文章"></a>编写文章</h3><ol>
<li>语法不熟悉<ul>
<li>在使用标记后必须空格, 随意缩进会导致没有格式, markdown有严格的缩进要求</li>
</ul>
</li>
</ol>
<h3 id="无法访问"><a href="#无法访问" class="headerlink" title="无法访问"></a>无法访问</h3><ul>
<li>github pages中 出现Domain does not resolve to the GitHub Pages server.<br>在群里大佬帮助下找到问题所在, 将域名解析删除, 留下一个CNAME, 只填写wangdaye7.github.io<br>, 检查hexo/source文件夹下的CNAME文件.完成后cmd中运行ipconfig /flushdns, 然后Chrome中Ctrl+Shift+R不使用缓存.问题解决<br><a href="http://pnu39ljha.bkt.clouddn.com/hexo%E5%BC%82%E5%B8%B81.png" target="_blank" rel="noopener">hexoError</a><br><a href="http://pnu39ljha.bkt.clouddn.com/githubPage%E5%BC%82%E5%B8%B81.png" target="_blank" rel="noopener">githubPagesError</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://wangdaye7.github.io/2019/02/24/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jiahao Wang">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jhmarryme's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/24/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-24T11:46:40Z">
                2019-02-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Jiahao Wang</p>
              <p class="site-description motion-element" itemprop="description">blog</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jiahao Wang</span>
	
	<div class="powered-by">
	<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
	  本站访客数:<span id="busuanzi_value_site_uv"></span>
	</span>
	</div>

  
</div>


<!--
  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>
-->



  <span class="post-meta-divider">|</span>



<!--
  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>
-->




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
